# Title: create_package_data.R
# Author: K. Baldry - IMAS/UTAS
# Created: 17/07/2021
#
# This script updates BIO-MATE.
#
# 
#
library(bibtex)
library(roxygen2)

# update_package <- function(){}

### Citation .bib file
# citation files are updated within bibpath
# compile new citations into one file
bibpath = "./product_data/supporting_information/citations"
path_to_bib_files = list.files(bibpath, pattern = "*.bib")
combined_bib <- ""
for (path_to_bib_file in path_to_bib_files) {
  
  fileCon <- file(file.path(bibpath,path_to_bib_file))
  content <- readLines(fileCon)
  close(fileCon)
  
  combined_bib <- paste0(combined_bib, "\n", "\n", trimws(paste0(content, collapse="\n")))
  
}
cat(combined_bib, file=file.path("./Rpackage/inst","BIO-MATE_references.bib"), "\n")
# create bib object and save in R package
bib = read.bib(file.path("./Rpackage/inst","BIO-MATE_references.bib"))
#save data
save(bib,file =file.path("./Rpackage/data","BIOMATE.RData"))

### BIO-MATE metadata 


### Compile package
roxygen2::roxygenise()